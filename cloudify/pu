
<% if(binding.variables.containsKey("targets") && targets && targets.size()>0){

println """\
<os-gateway:delegator id="delegator" 
  local-gateway-name=\"${localgwname}\" gateway-lookups=\"gatewayLookups\">
  <os-gateway:delegations> """
targets.each{
println "    <os-gateway:delegation target=\"${it}\"/>"
}
println """\
  </os-gateway:delegations>
</os-gateway:delegator> """
}
%>

<% if( binding.variables.containsKey("sources") && sources && sources.size()>0){

println """\
<os-gateway:sink id=\"sink\" 
  local-gateway-name=\"${localgwname}\" 
  gateway-lookups=\"gatewayLookups\" 
  local-space-url=\"${localspaceurl}\">
  <os-gateway:sources>    """
sources.each{
println "   <os-gateway:source name=\"${it}\"/>"
}
println """\
  </os-gateway:sources>
</os-gateway:sink> """
}
%>

<os-gateway:lookups id="gatewayLookups">
<%
lookups.each{
println """\
  <os-gateway:lookup gateway-name=\"${it['gwname']}\" 
    host=\"${it['address']}\" discovery-port=\"${it['discoport']}\" 
    communication-port=\"${it['commport']}\" /> """
}
%>
</os-gateway:lookups>
<!--The above ports and host names are randomly selected and 
have no meaning, all sites could designate the same ports as well -->
